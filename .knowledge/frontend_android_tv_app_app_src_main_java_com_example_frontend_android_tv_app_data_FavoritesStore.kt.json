{"is_source_file": true, "format": "Kotlin", "description": "This Kotlin source file defines the FavoritesStore class, which manages a local store of user's favorite video IDs in an Android application. It persists data using SharedPreferences in JSON format and exposes a reactive Flow to notify UI components of changes.", "external_files": ["android.content.Context", "android.content.SharedPreferences", "org.json.JSONArray", "org.json.JSONObject", "kotlinx.coroutines.flow.Flow", "kotlinx.coroutines.flow.MutableStateFlow", "kotlinx.coroutines.flow.asStateFlow"], "external_methods": ["SharedPreferences.edit()", "SharedPreferences.getString()", "SharedPreferences.putString()", "JSONArray()", "JSONArray.optJSONArray()", "JSONArray.put()", "JSONObject()", "JSONObject.put()", "Flow.asStateFlow()"], "published": ["FavoritesStore", "FavoritesStore.from"], "classes": [{"name": "FavoritesStore", "description": "A class for managing a user's favorite video IDs, persisted in SharedPreferences and reactive via Kotlin Flow."}], "methods": [{"name": "readFavoritesFromPrefs", "description": "Reads the set of favorite video IDs from SharedPreferences, handling JSON parsing and errors."}, {"name": "writeFavoritesToPrefs", "description": "Writes the set of favorite video IDs to SharedPreferences in JSON format."}, {"name": "setFavorites", "description": "Persists the given set of favorite IDs and updates the flow."}, {"name": "isFavorite", "description": "Checks if a given video ID is marked as a favorite."}, {"name": "toggleFavorite", "description": "Toggles the favorite status for a specified video ID."}, {"name": "setFavorite", "description": "Sets the favorite status explicitly for a specified video ID."}, {"name": "favoritesFlow", "description": "Returns a reactive flow of the current set of favorite IDs."}, {"name": "from", "description": "Factory method to create a FavoritesStore instance using the provided Android Context."}], "calls": ["prefs.getString", "prefs.edit", "edit().putString", "JSONObject()", "JSONObject.optJSONArray", "JSONArray()", "JSONArray.optString", "JSONArray.put", "JSONObject.put", "favoritesState.asStateFlow()"], "search-terms": ["FavoritesStore", "SharedPreferences", "favorites JSON", "video IDs", "reactive flow", "local storage"], "state": 2, "file_id": 32, "knowledge_revision": 84, "git_revision": "", "hash": "68f4d88a5afbc5e1987d24fe9d500a48", "format-version": 4, "code-base-name": "frontend_android_tv_app", "filename": "frontend_android_tv_app/app/src/main/java/com/example/frontend_android_tv_app/data/FavoritesStore.kt", "revision_history": [{"84": ""}]}