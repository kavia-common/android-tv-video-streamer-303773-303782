{"is_source_file": true, "format": "Kotlin", "description": "This file defines a PlayerFragment class for an Android TV app, responsible for video playback, UI controls, subtitles, autoplay, and user interaction handling.", "external_files": ["androidx.fragment.app.Fragment", "androidx.media3.common.MediaItem", "androidx.media3.common.Player", "androidx.media3.exoplayer.ExoPlayer", "androidx.media3.ui.CaptionStyleCompat", "androidx.media3.ui.PlayerView", "androidx.media3.ui.SubtitleView", "com.bumptech.glide.Glide", "com.example.frontend_android_tv_app.data.FavoritesStore", "com.example.frontend_android_tv_app.data.LastPlayedIndexStore", "com.example.frontend_android_tv_app.data.ProgressStore", "com.example.frontend_android_tv_app.data.SubtitleSelectionStore", "com.example.frontend_android_tv_app.data.SubtitlesRepository", "com.example.frontend_android_tv_app.data.VideosRepository", "com.example.frontend_android_tv_app.R"], "external_methods": ["com.bumptech.glide.Glide.with()", "com.example.frontend_android_tv_app.data.SubtitlesRepository.tracksForVideo()", "com.example.frontend_android_tv_app.data.SubtitlesRepository.toSubtitleConfiguration()", "com.example.frontend_android_tv_app.data.VideoParcelable.toVideo()", "com.example.frontend_android_tv_app.data.ProgressStore.from()", "com.example.frontend_android_tv_app.data.FavoritesStore.from()", "com.example.frontend_android_tv_app.data.LastPlayedIndexStore.from()", "com.example.frontend_android_tv_app.data.SubtitleSelectionStore.getSelectedTrackId()", "com.example.frontend_android_tv_app.data.SubtitleSelectionStore.setSelectedTrackId()", "com.example.frontend_android_tv_app.data.VideosRepository.videos", "com.example.frontend_android_tv_app.data.VideosRepository.categories", "com.example.frontend_android_tv_app.data.VideosRepository.videosForCategory()"], "published": ["PlayerFragment.newInstance()", "PlayerFragment.newInstance()", "PlayerFragment.newInstanceWithContext()"], "classes": [{"name": "PlayerFragment", "description": "A Fragment handling video playback with media controls, subtitles, autoplay, and overlays for an Android TV app."}], "methods": [{"name": "onCreate", "description": "Initializes the fragment, extracts arguments, and sets up data stores."}, {"name": "onCreateView", "description": "Inflates the layout for the fragment."}, {"name": "onViewCreated", "description": "Initializes UI components, configures controls, and sets event listeners."}, {"name": "onStart", "description": "Sets up the media player, applies subtitle styling, restores persisted states, and starts progress updates."}, {"name": "onStop", "description": "Releases the media player and cancels autoplay when the fragment stops."}, {"name": "handleKey", "description": "Handles key events for controls like seek, volume, mute, subtitles, and navigation."}, {"name": "togglePlayPause", "description": "Toggles between playing and pausing the video."}, {"name": "updatePlayPauseLabel", "description": "Updates the play/pause button label based on current playback state."}, {"name": "seekBy", "description": "Seeks the video forward or backward by a specified amount."}, {"name": "changeVolumeBy", "description": "Adjusts the volume by a specified delta."}, {"name": "toggleMute", "description": "Mutes or unmutes the audio."}, {"name": "updateVolumeText", "description": "Updates the volume display text."}, {"name": "updateTimeAndProgress", "description": "Updates the on-screen time and progress bar."}, {"name": "formatTime", "description": "Formats milliseconds into mm:ss string."}, {"name": "setOverlayVisible", "description": "Shows or hides the overlay controls."}, {"name": "showOverlayTemporarily", "description": "Displays overlay controls for a brief period."}, {"name": "scheduleOverlayHide", "description": "Schedules hiding of overlay controls after timeout."}, {"name": "persistProgressIfNeeded", "description": "Saves current playback position unless near end."}, {"name": "startAutoplayFlow", "description": "Begins autoplay sequence after playback ends."}, {"name": "resolveRowVideos", "description": "Resolves a list of videos for the current row based on context."}, {"name": "renderNextUpState", "description": "Displays or hides the 'Next Up' overlay based on autoplay state."}, {"name": "updateSeekbarA11y", "description": "Updates accessibility description for the seekbar."}, {"name": "hideNextUpOverlay", "description": "Hides the 'Next Up' overlay."}, {"name": "cancelAutoplay", "description": "Cancels any ongoing autoplay flow."}, {"name": "playNextUp", "description": "Initiates playback of the next video in autoplay sequence."}, {"name": "buildMediaItemForCurrentVideo", "description": "Constructs a MediaItem with subtitle configurations for playback."}, {"name": "configureSubtitleOverlayUi", "description": "Sets up the subtitle track selection overlay."}, {"name": "showSubtitleSettingsOverlay", "description": "Displays subtitle track selection overlay."}, {"name": "hideSubtitleSettingsOverlay", "description": "Hides subtitle track selection overlay."}, {"name": "applySubtitleSelectionByIndex", "description": "Applies subtitle track selection based on list position."}, {"name": "applySubtitleSelection", "description": "Configures track selection in the media player."}, {"name": "toggleSubtitlesQuick", "description": "Quick toggle subtitles on/off with default or persisted choice."}], "calls": ["updatePlayPauseLabel()", "showOverlayTemporarily()", "cancelAutoplay()", "hideNextUpOverlay()", "playNextUp()", "buildMediaItemForCurrentVideo()", "configureSubtitleOverlayUi()", "hideSubtitleSettingsOverlay()", "applySubtitleSelectionByIndex()", "applySubtitleSelection()", "setOnItemClickListener()", "setItemChecked()", "requestFocus()", "load()", "centerCrop()", "setMediaItem()", "prepare()", "playWhenReady()", "setTrackTypeDisabled()", "setPreferredTextLanguage()", "sendAccessibilityEvent()", "post()", "seekTo()", "pause()", "play()", "release()", "setContentDescription()", "setOnClickListener()", "setOnSeekBarChangeListener()", "setOnFocusChangeListener()", "post { ... }", "view.findViewById()", "requireArguments()", "requireContext()", "requireActivity()", "Log.e()", "Color.parseColor()", "Looper.getMainLooper()", "Handler()", "Runnable { ... }"], "search-terms": ["PlayerFragment", "exoplayer", "autoplay", "subtitle", "overlay", "autoplayCoordinator", "nextUp", "seekBar", "video playback", "subtitle tracks", "autoplay sequence", "keyboard controls", "TV app"], "state": 2, "file_id": 29, "knowledge_revision": 160, "git_revision": "7644e865d59481eaaa3dc4c0e256961704c02803", "revision_history": [{"64": ""}, {"68": ""}, {"77": "8f3bd2a44be0c20c2cdd27771c55251538083b85"}, {"98": "a2c6db98100f0ce236183e23a803dce7972e5e5f"}, {"136": "a2c6db98100f0ce236183e23a803dce7972e5e5f"}, {"143": "a2c6db98100f0ce236183e23a803dce7972e5e5f"}, {"145": "a2c6db98100f0ce236183e23a803dce7972e5e5f"}, {"158": "7644e865d59481eaaa3dc4c0e256961704c02803"}, {"159": "7644e865d59481eaaa3dc4c0e256961704c02803"}, {"160": "7644e865d59481eaaa3dc4c0e256961704c02803"}], "hash": "1c7e6dbf9e5452fb8d685a3a01548805", "format-version": 4, "code-base-name": "frontend_android_tv_app", "filename": "frontend_android_tv_app/app/src/main/java/com/example/frontend_android_tv_app/ui/screens/PlayerFragment.kt"}