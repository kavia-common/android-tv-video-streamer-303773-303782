{"is_source_file": true, "format": "Kotlin", "description": "This Kotlin source file implements a Fragment named PlayerFragment for an Android TV app. It manages video playback with ExoPlayer, handles user input for controlling playback (such as play/pause, seek, volume, mute), overlays controls, displays a 'Next Up' autoplay overlay, and coordinates autoplay behavior based on user interactions and playback state.", "external_files": ["android.os.Bundle", "android.os.Handler", "android.os.Looper", "android.view.KeyEvent", "android.view.LayoutInflater", "android.view.View", "android.view.ViewGroup", "android.widget.Button", "android.widget.ImageView", "android.widget.ProgressBar", "android.widget.SeekBar", "android.widget.TextView", "androidx.fragment.app.Fragment", "androidx.media3.common.MediaItem", "androidx.media3.common.Player", "androidx.media3.exoplayer.ExoPlayer", "androidx.media3.ui.PlayerView", "com.bumptech.glide.Glide", "com.example.frontend_android_tv_app.R", "com.example.frontend_android_tv_app.data.FavoritesStore", "com.example.frontend_android_tv_app.data.LastPlayedIndexStore", "com.example.frontend_android_tv_app.data.ProgressStore", "com.example.frontend_android_tv_app.data.Video", "com.example.frontend_android_tv_app.data.VideoParcelable", "com.example.frontend_android_tv_app.data.VideosRepository", "com.example.frontend_android_tv_app.data.toParcelable", "com.example.frontend_android_tv_app.data.toVideo", "com.example.frontend_android_tv_app.ui.player.AutoplayCoordinator"], "external_methods": ["VideosRepository.categories", "VideosRepository.videosForCategory", "VideosRepository.videos", "FavoritesStore.from", "ProgressStore.from", "LastPlayedIndexStore.from"], "published": ["newInstance", "newInstanceWithContext"], "classes": [{"name": "PlayerFragment", "description": "A Fragment managing video playback for an Android TV app, including user controls, overlay UI, autoplay logic, and integration with ExoPlayer."}], "methods": [{"name": "onCreate", "description": "Initializes video and row context from arguments, sets up data stores."}, {"name": "onCreateView", "description": "Inflates the fragment layout."}, {"name": "onViewCreated", "description": "Initializes UI components, event listeners, and configures the player."}, {"name": "onStart", "description": "Sets up and starts ExoPlayer, begins UI updates."}, {"name": "onStop", "description": "Releases ExoPlayer and stops UI updates."}, {"name": "handleKey", "description": "Handles key events for remote control navigation and operations."}, {"name": "togglePlayPause", "description": "Toggles between play and pause states."}, {"name": "updatePlayPauseLabel", "description": "Updates the button label based on current playback state."}, {"name": "seekBy", "description": "Seeks forward or backward in the video."}, {"name": "changeVolumeBy", "description": "Adjusts volume up or down."}, {"name": "toggleMute", "description": "Toggles mute state."}, {"name": "updateVolumeText", "description": "Updates UI with current volume percentage."}, {"name": "updateTimeAndProgress", "description": "Updates UI with current playback position and progress."}, {"name": "formatTime", "description": "Formats milliseconds to MM:SS string."}, {"name": "setOverlayVisible", "description": "Sets overlay visibility."}, {"name": "showOverlayTemporarily", "description": "Shows overlay temporarily, hides after delay."}, {"name": "scheduleOverlayHide", "description": "Schedules overlay to hide after delay."}, {"name": "persistProgressIfNeeded", "description": "Saves playback progress, clears if near end."}, {"name": "startAutoplayFlow", "description": "Initiates autoplay sequence for next videos."}, {"name": "resolveRowVideos", "description": "Resolves list of videos for the current row based on key or explicit IDs."}, {"name": "renderNextUpState", "description": "Displays or hides the 'Next Up' overlay based on autoplay state."}, {"name": "hideNextUpOverlay", "description": "Hides the 'Next Up' overlay."}, {"name": "cancelAutoplay", "description": "Cancels autoplay flow and overlay."}, {"name": "playNextUp", "description": "Starts playback of the next video in autoplay."}], "calls": ["Player.setMediaItem", "Player.prepare", "Player.playWhenReady", "Player.pause", "Player.seekTo", "Player.release", "Glide.with", "Glide.load", "Glide.into"], "search-terms": ["PlayerFragment", "autoplay", "overlay controls", "Next Up", "seek", "volume control", "mute toggle", "ExoPlayer", "video playback", "TV remote control", "autoplay coordinator"], "state": 2, "file_id": 29, "knowledge_revision": 98, "git_revision": "a2c6db98100f0ce236183e23a803dce7972e5e5f", "revision_history": [{"64": ""}, {"68": ""}, {"77": "8f3bd2a44be0c20c2cdd27771c55251538083b85"}, {"98": "a2c6db98100f0ce236183e23a803dce7972e5e5f"}], "hash": "e9a97c6fd2f26b68d05fe719f9a92a9c", "format-version": 4, "code-base-name": "frontend_android_tv_app", "filename": "frontend_android_tv_app/app/src/main/java/com/example/frontend_android_tv_app/ui/screens/PlayerFragment.kt"}