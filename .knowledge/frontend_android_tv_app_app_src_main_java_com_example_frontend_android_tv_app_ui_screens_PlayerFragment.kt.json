{"is_source_file": true, "format": "Kotlin", "description": "This Kotlin source file defines the PlayerFragment class, which manages the video player UI and behavior for an Android TV application. It handles video playback controls via DPAD/keyboard, manages overlays, persists progress, and interacts with the media player library.", "external_files": ["androidx.fragment.app.Fragment", "androidx.media3.common.MediaItem", "androidx.media3.common.Player", "androidx.media3.exoplayer.ExoPlayer", "androidx.media3.ui.PlayerView", "com.example.frontend_android_tv_app.R", "com.example.frontend_android_tv_app.data.ProgressStore", "com.example.frontend_android_tv_app.data.Video", "com.example.frontend_android_tv_app.data.VideoParcelable", "com.example.frontend_android_tv_app.data.toParcelable", "com.example.frontend_android_tv_app.data.toVideo"], "external_methods": ["android.os.Bundle.getParcelable", "android.os.Bundle.getLong", "androidx.fragment.app.Fragment.onCreate", "androidx.fragment.app.Fragment.onCreateView", "androidx.fragment.app.Fragment.onViewCreated", "androidx.fragment.app.Fragment.onStart", "androidx.fragment.app.Fragment.onStop", "android.view.LayoutInflater.inflate", "android.view.View.findViewById", "android.view.View.setOnKeyListener", "android.os.Handler.post", "android.os.Handler.postDelayed", "android.os.Handler.removeCallbacks", "androidx.media3.exoplayer.ExoPlayer.Builder", "ExoPlayer.setMediaItem", "ExoPlayer.prepare", "ExoPlayer.seekTo", "ExoPlayer.playWhenReady", "ExoPlayer.release", "ExoPlayer.addListener", "Player.Listener.onIsPlayingChanged", "Player.Listener.onPlaybackStateChanged", "View.setOnClickListener", "Button.requestFocus", "SeekBar.setOnSeekBarChangeListener", "SeekBar.setProgress", "View.setOnKeyListener", "Handler.post", "Handler.postDelayed", "Handler.removeCallbacks"], "published": ["com.example.frontend_android_tv_app.ui.screens.PlayerFragment"], "classes": [{"name": "PlayerFragment", "description": "A Fragment managing video playback, controls, overlay UI, and progress persistence for an Android TV app."}], "methods": [{"name": "onCreate", "description": "Initializes the fragment, retrieves Video argument, and sets up progress storage."}, {"name": "onCreateView", "description": "Inflates the fragment layout."}, {"name": "onViewCreated", "description": "Initializes UI components, sets click listeners, key handling, and overlay behavior."}, {"name": "onStart", "description": "Initializes ExoPlayer, prepares media, seeks to resume position, sets up playback, and starts periodic updates."}, {"name": "onStop", "description": "Releases ExoPlayer, stops handlers, and persists progress."}, {"name": "handleKey", "description": "Processes key events for navigation, playback controls, and exit."}, {"name": "togglePlayPause", "description": "Toggles between play and pause states."}, {"name": "updatePlayPauseLabel", "description": "Updates the play/pause button label based on playback state."}, {"name": "seekBy", "description": "Seeks the video by a specified number of milliseconds."}, {"name": "changeVolumeBy", "description": "Adjusts volume by a delta, within 0-1 range."}, {"name": "toggleMute", "description": "Mutes or unmutes the audio."}, {"name": "updateVolumeText", "description": "Updates the volume display text."}, {"name": "updateTimeAndProgress", "description": "Updates current playback time and progress bar."}, {"name": "formatTime", "description": "Formats milliseconds to mm:ss string."}, {"name": "setOverlayVisible", "description": "Sets overlay visibility."}, {"name": "showOverlayTemporarily", "description": "Displays overlay and schedules auto-hide."}, {"name": "scheduleOverlayHide", "description": "Schedules overlay to be hidden after delay."}, {"name": "persistProgressIfNeeded", "description": "Saves current progress unless near completion."}], "calls": ["activity.goBack()", "player.seekTo()", "player.pause()", "player.play()", "player.release()", "player.addListener()", "player.setMediaItem()", "player.prepare()", "player.playWhenReady", "handler.post()", "handler.postDelayed()", "handler.removeCallbacks()"], "search-terms": ["PlayerFragment", "media3", "ExoPlayer", "video playback controls", "overlay controls", "progress persistence", "DPAD navigation", "Android TV"], "state": 2, "file_id": 29, "knowledge_revision": 77, "git_revision": "8f3bd2a44be0c20c2cdd27771c55251538083b85", "revision_history": [{"64": ""}, {"68": ""}, {"77": "8f3bd2a44be0c20c2cdd27771c55251538083b85"}], "hash": "827a32b7a83d58adf10d76867063ffc6", "format-version": 4, "code-base-name": "frontend_android_tv_app", "filename": "frontend_android_tv_app/app/src/main/java/com/example/frontend_android_tv_app/ui/screens/PlayerFragment.kt"}